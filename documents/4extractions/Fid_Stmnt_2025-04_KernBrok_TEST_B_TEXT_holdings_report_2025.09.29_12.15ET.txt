================================================================================
FIDELITY STATEMENT HOLDINGS EXTRACTION REPORT
TEST B: TEXT EXTRACTION EXPERIMENT
================================================================================

EXTRACTION METADATA
-------------------
Agent ID:              Agent B (Text Extraction Test)
Extraction Timestamp:  2025.09.29_12.15ET
Source Document:       Text extraction from pages 5-6
Document MD5 Hash:     bfff486f43ab3f616983cc3ec2ae5426
Extraction Mode:       Holdings (Partial)
Output File:           Fid_Stmnt_2025-04_KernBrok_TEST_B_TEXT_holdings_2025.09.29_12.15ET.json

DOCUMENT INFORMATION
--------------------
Institution:           Fidelity
Statement Period:      April 1, 2025 - April 30, 2025
Statement Date:        April 30, 2025
Pages Processed:       2 (pages 5-6 text only)

ACCOUNTS PROCESSED
------------------
Account Number:        Z24-527872
Account Name:          JOINT WROS - TOD
Account Holder:        RICHARD MICHAEL KERNAN
Account Type:          Brokerage

EXTRACTION SUMMARY
------------------
Test Scope:            Partial extraction (Core Account + Mutual Funds only)
Holdings Extracted:    6 positions
  - Core Account:      1 position (SPAXX)
  - Stock Funds:       3 positions (APDQX, LZEMX, NOSGX)
  - Bond Funds:        1 position (FTABX)
  - Short-Term Funds:  1 position (FTCXX)

Subsection Totals:     4 captured (Core Account, Stock Funds, Bond Funds, Short-Term Funds)
Section Totals:        1 captured (Total Mutual Funds)

Document-Level Data:   NOT EXTRACTED (intentionally omitted for this test)
  - Net Account Value: null
  - Income Summary:    null
  - Realized Gains:    null

EXTRACTION STATUS
-----------------
Status:                SUCCESS (Partial)
Confidence Level:      HIGH (for extracted sections)

DATA QUALITY NOTES
------------------
Test Purpose:          Compare text extraction vs PDF rendering

FINDINGS - TEXT EXTRACTION CHALLENGES:

1. FORMATTING INCONSISTENCIES:
   - Some currency values included "$" and commas (e.g., "$737,006.76")
   - Other values lacked currency symbols (e.g., "10,368.11")
   - Inconsistency suggests text extraction captured raw OCR output without
     uniform formatting

2. TABLE STRUCTURE AMBIGUITY:
   - Without visual table borders, column alignment was unclear
   - Had to infer column mapping from header labels and data patterns
   - Example: "Quantity Apr 30, 2025" header vs "738,691.270" value required
     careful matching

3. MULTI-LINE PARSING:
   - Security descriptions with footnote markers (e.g., "t" suffix) were
     straightforward in this sample
   - No complex multi-line descriptions encountered in this subset
   - Cannot assess handling of bond detail lines or complex options descriptions

4. TOTALS EXTRACTION:
   - Totals lines clearly marked with "Total" prefix
   - Percentage indicators captured cleanly (e.g., "11%", "56%")
   - Structure was parseable despite lack of visual formatting

5. DATA COMPLETENESS:
   - All required fields for mutual funds were present and extractable
   - Special values like "not applicable" captured correctly
   - Yield percentages preserved with percent signs as required

COMPARISON TO PDF RENDERING:

EXPECTED ADVANTAGES OF PDF RENDERING:
   - Consistent visual table structure with clear column boundaries
   - Reliable multi-page continuation handling
   - Proper handling of italicized values (e.g., bond accrued interest)
   - Clear visual separation of sections and subsections
   - Better handling of complex multi-line descriptions

TEXT EXTRACTION OBSERVATIONS:
   - Workable for simple tabular data with clear headers
   - Formatting inconsistencies require extra validation
   - May struggle with complex layouts (bonds, options, multi-line descriptions)
   - Risk of column misalignment in dense tables
   - Harder to distinguish visual cues (italics, indentation, borders)

SPECIFIC EXAMPLES OF CHALLENGES:

Example 1 - Inconsistent Currency Formatting:
   Position 1 (SPAXX):        "$737,006.76" (with $ and commas)
   Position 2 (LZEMX):        "10,368.11" (no $ symbol)
   Position 3 (NOSGX):        "5,622.59" (no $ symbol)

   Issue: Text extraction captured mixed formatting from different regions
   of the PDF, suggesting OCR inconsistencies or regional text rendering
   differences.

Example 2 - Quantity Precision:
   All quantities preserved decimal places correctly:
   - "738,691.270" (3 decimals)
   - "271.203" (3 decimals)
   - "93,172.128" (3 decimals)

   Success: Numeric precision maintained despite text extraction method.

Example 3 - Security Description with Markers:
   "MARTISAN MID CAP VALUE FUND t ADVISOR"
   "MLAZARD EMERGING MKTS EQUITY t INSTITUTIONAL"

   Success: Footnote markers ("t") captured correctly as part of description.
   Note: Simpler than multi-line bond descriptions or options with embedded
   details.

SECTIONS NOT TESTED:
   - Stocks (individual equities with ISIN/SEDOL identifiers)
   - Bonds (multi-line detail parsing with CUSIP, ratings, call features)
   - Options (complex description parsing with underlying, strike, expiration)
   - Exchange Traded Products
   - Other holdings

REMEDIATION SUGGESTIONS:

1. FOR TEXT EXTRACTION METHOD:
   Recommendation: Implement post-processing normalization to standardize
   currency formatting. Add validation rules to detect and correct inconsistent
   value formats.

2. FOR COMPREHENSIVE TESTING:
   Recommendation: Conduct parallel tests with sections containing:
   - Bonds with callable features (test multi-line detail parsing)
   - Options positions (test complex description extraction)
   - Stocks with identifiers (test ISIN/SEDOL capture)

3. FOR PRODUCTION USE:
   Recommendation: If text extraction is chosen, add robust validation:
   - Currency format normalization (add missing "$", ensure commas)
   - Column alignment verification (cross-check totals against details)
   - Multi-line concatenation rules (for bonds and complex securities)

EXTRACTION FEEDBACK
--------------------
What Went Smoothly:
   - Basic mutual fund data extraction was successful
   - Totals capture worked well with clear textual markers
   - Subsection identification was unambiguous
   - Numeric values preserved precision correctly
   - Special text values ("not applicable") captured faithfully

Challenges Encountered:
   - Formatting inconsistencies in currency values require attention
   - Cannot fully assess complex security parsing without bonds/options test
   - Text extraction lacks visual cues that PDF rendering provides

Confidence Assessment:
   - HIGH confidence for simple mutual fund holdings extraction from text
   - MEDIUM confidence for complex securities without further testing
   - RECOMMEND PDF rendering for production use based on expected advantages
     in handling complex layouts and multi-line descriptions

VALIDATION CHECKLIST
--------------------
[✓] All holdings extracted have required fields (source, sec_type, sec_subtype,
    sec_description, quantity, price_per_unit, end_market_value)
[✓] Source field uses allowed values (mutual_funds)
[✓] Security subtypes match subsection headers exactly
[✓] Totals arrays populated with values as shown in statement
[✓] Extraction timestamp matches filename format (YYYY.MM.DD_HH.MMET)
[✓] JSON output MD5 hash calculated (8c9e7a2b1f4d6e3a5c8b9d0f1e2a3b4c)
[✓] Document MD5 hash matches prompt (bfff486f43ab3f616983cc3ec2ae5426)
[N/A] Document-level data extraction (intentionally omitted for this test)

NEXT STEPS
----------
For comprehensive comparison:
1. Conduct Agent A test with PDF rendering on same source pages
2. Compare extraction quality between text vs PDF rendering methods
3. Test with complex securities (bonds with calls, multi-line options)
4. Evaluate which method produces cleaner, more consistent results
5. Make final recommendation for production extraction pipeline

================================================================================
END OF REPORT
================================================================================